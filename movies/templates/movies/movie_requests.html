{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>My Movie Requests</h2>
  <hr>

  <!-- Create new request -->
  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="create_request" value="1">

    <div class="mb-3">
      <label for="movie_name">Movie Name:</label>
      <input type="text" name="movie_name" id="movie_name" class="form-control" required>
    </div>

    <div class="mb-3">
      <label for="movie_description">Movie Description:</label>
      <textarea name="movie_description" id="movie_description" class="form-control"></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Submit Request</button>
  </form>

  <hr>
  <h3>Your Requests</h3>
  <ul class="list-group mt-3">
    {% for r in requests %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ r.movie_name }}</strong><br>
          <small>{{ r.movie_description }}</small><br>
          <small class="text-muted">{{ r.created_at|date:"M d, Y H:i" }}</small>
        </div>
        <form method="post" style="margin:0;">
          {% csrf_token %}
          <input type="hidden" name="delete_request" value="1">
          <input type="hidden" name="request_id" value="{{ r.id }}">
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
      </li>
    {% empty %}
      <li class="list-group-item">You havenâ€™t requested any movies yet.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
